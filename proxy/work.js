var Work,models;models=require("../models"),Work=models.Work,exports.getWorkPage=function(e,t,r){var o;return null==e&&(e=1),null==t&&(t=20),o=(e-1)*t,Work.find({}).sort({create_at:"-1"}).skip(o).limit(t).populate("author_id").populate("tag_id").exec(function(e,t){return Work.count({},function(o,n){return r(e,t,n)})})},exports.getWorks=function(e,t){return Work.find({}).sort({create_at:"-1"}).populate("author_id").populate("tag_id").exec(t)},exports.getWorkByNames=function(e,t){return 0===e.length?t(null,[]):Work.find({name:e},t)},exports.getWorkByShortName=function(e,t){return null==e?t(!1,[]):Work.findOne({shortname:e}).populate("author_id").populate("tag_id").exec(t)},exports.getWorkByTagId=function(e,t){return Work.find({tag_id:e},t)},exports.getWorkById=function(e,t){return Work.findOne({_id:e}).populate("author_id").populate("tag_id").exec(t)},exports.getWorksByQuery=function(e,t,r){return Work.find(e,null,t,r)},exports.delWork=function(e,t){return Work.findById(e,function(e,r){return r.remove(t)})},exports.newAndSave=function(e,t,r,o,n,u,i,a,l,d,p,s){var k;return k=new Work,k.shortname=e,k.title=t,k.content=r,k.author_id=o,k.language=n,k.tag_id=u,k.mobile=i,k.website=a,k.small_img=p,k.phone_model=d,k.img=l,k.save(s)};
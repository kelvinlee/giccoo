var a,editor,fBindEidtorBtn,fBindForm,fBindShortName,fBindSwitch,fBindTitleEditor,fCreateEditor,fGetScrollTop,getFilesList,message,_i,_len,__indexOf=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};if(_menu)for(_i=0,_len=_menu.length;_len>_i;_i++)a=_menu[_i],$(".menu-"+a).addClass("active"),$(".menu-"+a+" .sub-menu").addClass("open");editor={},$(document).ready(function(){return $(".multiselect").length>0&&$(".multiselect").multiselect({maxHeight:200,buttonClass:"btn btn-primary"}),$(".del-this").length>0&&$(".del-this").click(function(){return confirm("Are you sure you want to delet this?")&&$.ajax({type:"get",dataType:"json",url:$(this).attr("href"),success:function(e){return message("Congratulation",e.reason,"",function(){}),window.location.reload()}}),!1}),$(".dropzone").length>0?(Dropzone.autoDiscover=!1,$(".dropzone").dropzone({url:"/admin/file-upload",addRemoveLinks:!0,maxFilesize:1.5,maxFiles:20,acceptedFiles:"image/*, application/pdf, .txt",dictResponseError:"File Upload Error."})):void 0}),message=function(e,t,r,i){return $.extend($.gritter.options,{position:"bottom-right"}),$.gritter.add({title:e,text:t,img:r,after_open:i})},fBindForm=function(){return $("[type=submit]").click(function(){var e;return e=$("form").parsley("validate"),e&&$.ajax({type:$("form").attr("method"),dataType:"json",url:$("form").attr("action"),data:$("form").serializeArray(),success:function(e){return 200!==e.recode?message("Some info is wrong",e.reason):message("Congratulation",e.reason)}}),!1})},fBindSwitch=function(){return $(".switch-demo, .switch-radio-demo").bootstrapSwitch()},fBindTitleEditor=function(){return $("[name=title]").on("change",function(e){return $("#title").text($(e.target).val())}),$("[name=title]").change()},fCreateEditor=function(){var e,t;return editor=CodeMirror.fromTextArea(document.getElementById("editor"),{mode:"markdown",lineNumbers:!1,theme:"default",extraKeys:{Enter:"newlineAndIndentContinueMarkdownList"}}),e=new Showdown.converter,editor.on("change",function(t){return t.save(),document.getElementById("preview").innerHTML=e.makeHtml(document.getElementById("editor").value)}),t=0,$(".CodeMirror-scroll").on("scroll",function(e){var r,i,o,n,d,c,l;return i=$(e.target),n=$(".entry-preview-content"),r=$(".CodeMirror-sizer"),o=$("#preview"),d=r.height()-i.height(),c=o.height()-n.height(),l=c/d,t=i.scrollTop()*l,console.log(t),$(".entry-preview-content").scrollTop(t)}),document.getElementById("preview").innerHTML=e.makeHtml(document.getElementById("editor").value),fBindEidtorBtn()},fGetScrollTop=function(e){return __indexOf.call(window,"pageYOffset")>=0?e.pageYOffset:e.scrollTop},fBindEidtorBtn=function(){return $(".editor-bold").click(function(){var e;return editor.replaceSelection("**"+editor.getSelection()+"**"),e=editor.getCursor(),e.ch-=2,editor.setCursor(e),editor.focus()}),$(".editor-italic").click(function(){var e;return editor.replaceSelection("*"+editor.getSelection()+"*"),e=editor.getCursor(),e.ch-=1,editor.setCursor(e),editor.focus()}),$(".editor-code").click(function(){var e;return editor.replaceSelection("`"+editor.getSelection()+"`"),e=editor.getCursor(),e.ch-=1,editor.setCursor(e),editor.focus()}),$(".editor-link").click(function(){var e;return editor.replaceSelection("["+editor.getSelection()+"](http://)"),e=editor.getCursor(),e.ch-=1,editor.setCursor(e),editor.focus()}),$(".editor-list-ul").click(function(){var e;return editor.replaceSelection("\n* \n* \n* "),e=editor.getCursor(),e.line-=2,e.ch=2,editor.setCursor(e),editor.focus()}),$(".editor-list-ol").click(function(){var e;return editor.replaceSelection("1. \n2. \n3. \n"),e=editor.getCursor(),e.line-=2,e.ch=2,editor.setCursor(e),editor.focus()}),$(".editor-files").click(function(){return $(".entry-preview-content").is(".file")?$(".entry-preview-content").removeClass("file"):$(".entry-preview-content").addClass("file"),getFilesList()}),$(".editor-images").click(function(){var e;return editor.replaceSelection("\n!["+$(this).data("name")+"]("+$(this).data("src")+")"),e=editor.getCursor(),editor.setCursor(e),editor.focus()})},getFilesList=function(){},fBindShortName=function(){return $("input[name=shortname]").keyup(function(){var e;return e=$(this).val().replace(/\s+/g,"-"),$(this).val(e)})};